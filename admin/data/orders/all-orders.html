<!doctype html>
<html lang="en" class="h-full">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seller Integration - Dashboard</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { jakarta: ["Plus Jakarta Sans", "sans-serif"] },
          colors: {
            primary: {
              50: "#f0f7ff",
              100: "#e0effe",
              200: "#bae0fd",
              300: "#7cc8fb",
              400: "#36aaf5",
              500: "#0c8ee6",
              600: "#0070c4",
              700: "#01599f",
              800: "#064b83",
              900: "#0b3f6d",
            },
            surface: {
              50: "#fafbfc",
              100: "#f4f6f8",
              200: "#e9ecef",
              300: "#dee2e6",
            },
          },
        },
      },
    };
  </script>
  <style>
    * {
      font-family: "Plus Jakarta Sans", sans-serif;
    }

    .sidebar-item:hover {
      background: rgba(12, 142, 230, 0.08);
    }

    .sidebar-item.active {
      background: rgba(12, 142, 230, 0.12);
      color: #0c8ee6;
    }

    .dropdown-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .dropdown-content.open {
      max-height: 600px;
    }

    .card-hover {
      transition: all 0.25s ease;
    }

    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.1);
    }

    .status-pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.4;
      }
    }

    .bar-fill {
      transition: width 1s ease;
    }

    .mini-bar {
      animation: growBar 1s ease forwards;
    }

    @keyframes growBar {
      from {
        height: 0;
      }

      to {
        height: var(--h);
      }
    }

    .badge-new {
      animation: fadeSlide 0.4s ease;
    }

    @keyframes fadeSlide {
      from {
        opacity: 0;
        transform: translateY(-4px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    ::-webkit-scrollbar {
      width: 5px;
      height: 5px;
    }

    ::-webkit-scrollbar-track {
      background: #f4f6f8;
    }

    ::-webkit-scrollbar-thumb {
      background: #c9d0d8;
      border-radius: 10px;
    }

    .modal-overlay {
      backdrop-filter: blur(4px);
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-box {
      animation: slideUp 0.25s ease;
    }

    .progress-ring {
      transition: stroke-dashoffset 1s ease;
    }

    @keyframes countUp {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .health-bar {
      transition: width 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .tooltip {
      position: relative;
    }

    .tooltip:hover .tooltip-text {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .tooltip-text {
      opacity: 0;
      visibility: hidden;
      transform: translateY(4px);
      transition: all 0.2s ease;
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      background: #1e293b;
      color: #fff;
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 6px;
      margin-bottom: 6px;
      z-index: 50;
    }

    /* Orders page extras */
    .table-row-hover:hover {
      background: #f0f7ff;
      cursor: pointer;
    }

    .tab-active {
      background: white;
      color: #0c8ee6;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
      font-weight: 600;
    }

    .tab-inactive {
      color: #64748b;
    }

    .tab-inactive:hover {
      color: #0c8ee6;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 4px 0;
      gap: 16px;
    }

    .detail-label {
      font-size: 12px;
      color: #64748b;
      min-width: 160px;
      flex-shrink: 0;
    }

    .detail-value {
      font-size: 12px;
      font-weight: 600;
      color: #1e293b;
      text-align: right;
      word-break: break-word;
    }

    /* Platform-specific fields: hidden by default, shown by JS */
    .shopee-field {
      display: none;
    }

    .tiktok-field {
      display: none;
    }
  </style>
</head>

<body class="h-full bg-surface-100">
  <div class="flex h-full">
    <!-- ═══════════════════════════════ SIDEBAR ═══════════════════════════════ -->
    <aside
      class="w-72 bg-white border-r border-surface-200 flex flex-col h-screen sticky top-0 overflow-hidden flex-shrink-0">
      <div class="p-6 border-b border-surface-200">
        <div class="flex items-center gap-3">
          <div
            class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center shadow-md shadow-primary-500/30">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <div>
            <h1 class="font-bold text-gray-900 text-lg leading-tight">
              Seller Integration
            </h1>
            <span
              class="px-2 py-0.5 text-[10px] font-bold bg-emerald-100 text-emerald-700 rounded-full uppercase tracking-wide">ADMIN</span>
          </div>
        </div>
      </div>

      <nav class="flex-1 overflow-y-auto p-4 space-y-0.5">

        <a href="../../dashboard.html"
          class="sidebar-item flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
          <i class="fa-solid fa-home w-5"></i>Dashboard
        </a>

        <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-3 py-2">Data Management</div>

        <div>
          <button onclick="toggleDropdown('orders')"
            class="sidebar-item active w-full flex items-center justify-between gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
            <div class="flex items-center gap-3">
              <i class="fa-solid fa-cart-shopping w-5"></i>Orders
            </div>
            <i id="orders-arrow" class="fa-solid fa-chevron-down text-gray-400"></i>
          </button>
          <div id="orders-dropdown" class="dropdown-content open pl-11 space-y-0.5 mt-0.5">
            <a href="../../data/orders/all-orders.html"
              class="block py-2 px-4 text-sm font-semibold text-primary-600 bg-primary-50 rounded-lg">All Orders</a>
            <a href="../../data/orders/to-confirm-orders.html"
              class="block py-2 px-4 text-sm text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all">Awaiting
              Confirmation</a>
            <a href="../../data/orders/to-pack-orders.html"
              class="block py-2 px-4 text-sm text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all">Ready
              to Pack</a>
            <a href="../../data/orders/packed-orders.html"
              class="block py-2 px-4 text-sm text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all">Packed
              Orders</a>
            <a href="../../data/orders/returned-orders.html"
              class="block py-2 px-4 text-sm text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all">Returned
              Orders</a>
            <a href="../../data/orders/shopee-orders.html"
              class="block py-2 px-4 text-sm text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all">Shopee</a>
            <a href="../../data/orders/tiktok-orders.html"
              class="block py-2 px-4 text-sm text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all">TikTok/Tokopedia</a>
          </div>
        </div>

        <a href="../../data/data-upload.html"
          class="sidebar-item flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
          <i class="fa-solid fa-upload w-5"></i>Data Upload
        </a>

        <div class="pt-3 text-[10px] font-bold text-slate-400 uppercase tracking-widest px-3 py-2">Shipping &amp;
          Logistics</div>

        <a href="../../shipping/print-label.html"
          class="sidebar-item flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
          <i class="fa-solid fa-print w-5"></i>Print Shipping Labels
        </a>
        <a href="../../shipping/resi-checker.html"
          class="sidebar-item flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
          <i class="fa-solid fa-barcode w-5"></i>Resi Checker
        </a>
        <a href="../../shipping/tracking-center.html"
          class="sidebar-item flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
          <i class="fa-solid fa-truck w-5"></i>Tracking Center
        </a>

        <div class="pt-3 text-[10px] font-bold text-slate-400 uppercase tracking-widest px-3 py-2">Analytics</div>

        <a href="../../analystics/product.html"
          class="sidebar-item flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 transition-all">
          <i class="fa-solid fa-chart-line w-5"></i>Product Performance
        </a>

      </nav>
    </aside>

    <!-- ═══════════════════════════════ MAIN ═══════════════════════════════ -->
    <main class="flex-1 overflow-y-auto">
      <!-- Header -->
      <header class="bg-white border-b border-surface-200 sticky top-0 z-10">
        <div class="flex items-center justify-between px-8 py-3 border-b border-surface-100">
          <nav class="flex items-center gap-2 text-sm text-slate-500">
            <span>Dashboard</span>
            <svg class="w-4 h-4 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
            <span class="text-slate-900 font-semibold">Overview</span>
          </nav>

          <div class="flex items-center gap-3">
            <div class="relative">
              <input type="text" placeholder="Search sellers, orders, logs…"
                class="w-64 pl-10 pr-4 py-2 bg-surface-100 border-0 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:bg-white transition-all" />
              <svg class="w-4 h-4 text-gray-400 absolute left-3.5 top-1/2 -translate-y-1/2" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>

            <div class="relative group">
              <button class="relative p-2.5 bg-surface-100 rounded-xl hover:bg-surface-200 transition-all">
                <svg class="w-5 h-5 text-gray-600 group-hover:text-primary-600 transition" fill="none"
                  stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                </svg>
                <span
                  class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center">5</span>
              </button>
              <span
                class="absolute top-full mt-2 left-1/2 -translate-x-1/2 whitespace-nowrap bg-gray-900 text-white text-xs px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition pointer-events-none">Notifications</span>
            </div>

            <div class="relative group">
              <button class="p-2.5 bg-surface-100 rounded-xl hover:bg-surface-200 transition-all">
                <svg class="w-5 h-5 text-gray-600 group-hover:text-primary-600 transition" fill="none"
                  stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8.228 9a3 3 0 115.544 1c0 2-3 2-3 4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </button>
              <span
                class="absolute top-full mt-2 left-1/2 -translate-x-1/2 whitespace-nowrap bg-gray-900 text-white text-xs px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition pointer-events-none">Help
                Center</span>
            </div>

            <div class="relative">
              <button onclick="toggleProfileDropdown()"
                class="flex items-center gap-2 p-1 pr-3 bg-surface-100 rounded-lg hover:bg-surface-200 transition-colors">
                <div
                  class="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center text-white font-bold text-xs shadow">
                  AD</div>
                <div class="text-left">
                  <p class="text-sm font-semibold text-gray-900 leading-none">Admin User</p>
                  <p class="text-[11px] text-emerald-600 mt-0.5">Admin</p>
                </div>
                <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <div id="profile-dropdown"
                class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-surface-200 py-1.5 z-20">
                <a href="../../my-profile.html"
                  class="flex items-center gap-2.5 px-3 py-2 text-sm text-gray-700 hover:bg-surface-50"><svg
                    class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                  </svg>My Profile</a>
                <hr class="my-1 border-surface-200">
                <a href="../login.html"
                  class="flex items-center gap-2.5 px-3 py-2 text-sm text-red-600 hover:bg-red-50"><svg class="w-4 h-4"
                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                  </svg>Sign Out</a>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Page Body -->
      <div class="p-8 space-y-6">
        <!-- Page Title + Actions -->
        <div class="flex items-start justify-between">
          <div>
            <h2 class="text-2xl font-extrabold text-gray-900 tracking-tight flex items-center gap-2.5">
              <span
                class="w-9 h-9 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center shadow shadow-primary-500/30">
                <i class="fa-solid fa-cart-shopping text-white text-sm"></i>
              </span>
              All Orders
            </h2>
            <p class="text-slate-500 text-sm mt-1.5">
              Complete order data from all uploaded batches
            </p>
            <p class="text-xs text-slate-400 mt-1 flex items-center gap-1.5">
              <i class="fa-regular fa-clock"></i>
              Last updated:
              <span id="last-updated-time" class="font-medium text-slate-500">—</span>
            </p>
          </div>
          <div class="flex items-center gap-2">
            <button onclick="exportData(this)"
              class="flex items-center gap-2 px-4 py-2.5 bg-white border border-surface-200 text-gray-700 text-sm font-semibold rounded-xl hover:bg-surface-50 transition-all shadow-sm">
              <i class="fa-solid fa-file-csv text-gray-500"></i>
              Export CSV
            </button>
            <button
              class="flex items-center gap-2 px-4 py-2.5 bg-primary-500 text-white text-sm font-semibold rounded-xl hover:bg-primary-600 transition-all shadow shadow-primary-500/30">
              <i class="fa-solid fa-file-excel"></i>
              Export Excel
            </button>
          </div>
        </div>

        <!-- Filter Bar -->
        <div class="bg-white rounded-2xl border border-surface-200 shadow-sm p-4 space-y-3">
          <div class="flex flex-wrap items-center gap-3">
            <div class="relative flex-1 min-w-[220px]">
              <input type="text" id="search-input" placeholder="Search order ID, tracking, buyer, product…"
                class="w-full pl-10 pr-4 py-2.5 bg-surface-50 border border-surface-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:bg-white transition-all"
                oninput="filterTable()" />
              <i class="fa-solid fa-search text-gray-400 absolute left-3.5 top-1/2 -translate-y-1/2 text-sm"></i>
            </div>
            <select id="filter-platform" onchange="filterTable()"
              class="px-3 py-2.5 bg-surface-50 border border-surface-200 rounded-xl text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-400 transition-all appearance-none min-w-[160px]">
              <option value="">All Platform</option>
              <option value="shopee">Shopee</option>
              <option value="tiktok">TikTok / Tokopedia</option>
            </select>
            <select id="filter-status" onchange="filterTable()"
              class="px-3 py-2.5 bg-surface-50 border border-surface-200 rounded-xl text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-400 transition-all appearance-none min-w-[160px]">
              <option value="">All Status</option>
              <option value="to confirm">To Confirm</option>
              <option value="to pack">To Pack</option>
              <option value="packed">Packed</option>
              <option value="returned">Returned</option>
            </select>
            <select id="filter-duplicate" onchange="filterTable()"
              class="px-3 py-2.5 bg-surface-50 border border-surface-200 rounded-xl text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-400 transition-all appearance-none min-w-[150px]">
              <option value="">All Data</option>
              <option value="true">Duplicate Only</option>
              <option value="false">Non-Duplicate</option>
            </select>
          </div>

          <div class="flex flex-wrap items-center gap-3">
            <i class="fa-regular fa-calendar text-gray-400 text-sm"></i>
            <span class="text-xs font-medium text-gray-500">Order Date:</span>
            <input type="date" id="filter-date-from" onchange="filterTable()"
              class="px-3 py-2 bg-surface-50 border border-surface-200 rounded-xl text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-400 transition-all" />
            <span class="text-xs text-gray-400">→</span>
            <input type="date" id="filter-date-to" onchange="filterTable()"
              class="px-3 py-2 bg-surface-50 border border-surface-200 rounded-xl text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-400 transition-all" />
            <button onclick="resetFilter()"
              class="px-3 py-2 bg-surface-100 text-gray-500 text-sm font-medium rounded-xl hover:bg-surface-200 transition-all flex items-center gap-1.5">
              <i class="fa-solid fa-rotate-right text-xs"></i> Reset
            </button>
            <span class="ml-auto text-xs text-gray-400 font-medium whitespace-nowrap">Showing
              <span id="count-num" class="font-bold text-gray-700">—</span> of
              <span id="count-total" class="font-bold text-gray-700">—</span>
              orders</span>
          </div>
        </div>

        <!-- Data Table -->
        <div class="bg-white rounded-2xl border border-surface-200 shadow-sm overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full text-sm min-w-[1100px]">
              <thead>
                <tr class="border-b border-surface-200 bg-surface-50">
                  <th class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider w-10">
                    <input type="checkbox" id="check-all" class="rounded" onchange="toggleAllCheckbox(this)" />
                  </th>
                  <th class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider w-10">
                    #
                  </th>
                  <th
                    class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-primary-600"
                    onclick="sortTable('order_id')">
                    Order ID
                    <i class="fa-solid fa-sort ml-1 text-gray-300"></i>
                  </th>
                  <th
                    class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-primary-600"
                    onclick="sortTable('platform')">
                    Platform
                    <i class="fa-solid fa-sort ml-1 text-gray-300"></i>
                  </th>
                  <th class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider">
                    Product
                  </th>
                  <th class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider">
                    Customer
                  </th>
                  <th
                    class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-primary-600"
                    onclick="sortTable('order_status')">
                    Status <i class="fa-solid fa-sort ml-1 text-gray-300"></i>
                  </th>
                  <th class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider">
                    Tracking
                  </th>
                  <th
                    class="text-right px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-primary-600"
                    onclick="sortTable('total_payment')">
                    Total Payment
                    <i class="fa-solid fa-sort ml-1 text-gray-300"></i>
                  </th>
                  <th
                    class="text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-primary-600"
                    onclick="sortTable('order_created_time')">
                    Order Date
                    <i class="fa-solid fa-sort ml-1 text-gray-300"></i>
                  </th>
                </tr>
              </thead>
              <tbody id="order-table-body" class="divide-y divide-surface-100"></tbody>
            </table>
          </div>

          <!-- Pagination -->
          <div class="flex items-center justify-between px-6 py-4 border-t border-surface-100">
            <div class="flex items-center gap-2 text-sm text-gray-500">
              Show
              <select id="per-page" onchange="renderTable()"
                class="px-2 py-1 bg-surface-100 border border-surface-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-400">
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
              per page
            </div>
            <div class="flex items-center gap-1" id="pagination-buttons"></div>
            <div class="text-sm text-gray-500">
              Page
              <span id="curr-page" class="font-bold text-gray-800">1</span> of
              <span id="total-pages" class="font-bold text-gray-800">—</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="border-t border-surface-200 bg-white px-8 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div
            class="w-6 h-6 bg-gradient-to-br from-primary-500 to-primary-700 rounded-md flex items-center justify-center">
            <svg class="w-3.5 h-3.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <span class="text-xs text-gray-500">Seller Integration Platform
            <span class="font-semibold text-gray-700">v3.2.1</span></span>
          <span class="text-gray-300">•</span>
          <span class="text-xs text-gray-400">Build <span class="font-mono">2024.10.24.001</span></span>
        </div>
        <div class="flex items-center gap-4 text-xs text-gray-400">
          <span class="flex items-center gap-1.5"><span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span>API:
            Operational</span>
          <span class="flex items-center gap-1.5"><span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span>DB:
            Connected</span>
          <span class="flex items-center gap-1.5"><span class="w-1.5 h-1.5 bg-amber-400 rounded-full"></span>Queues: 3
            pending</span>
          <span class="text-gray-300">•</span>
          <a href="#" class="hover:text-primary-600 transition">Documentation</a>
          <a href="#" class="hover:text-primary-600 transition">Support</a>
          <a href="#" class="hover:text-primary-600 transition">Privacy</a>
        </div>
      </footer>
    </main>
  </div>

  <!-- ═══════════════ ORDER DETAIL MODAL ═══════════════ -->
  <div id="orderModal"
    class="hidden fixed inset-0 z-50 flex items-start justify-center modal-overlay bg-black/40 overflow-y-auto py-6 px-4">
    <div class="modal-box bg-white rounded-2xl shadow-2xl w-full max-w-3xl mx-auto overflow-hidden">
      <!-- Modal Header -->
      <div class="bg-gradient-to-r from-primary-500 to-primary-700 p-5 flex items-start justify-between">
        <div>
          <div class="flex items-center gap-2 mb-1">
            <span id="modal-platform-badge"
              class="px-2.5 py-0.5 bg-white/20 text-white text-xs font-bold rounded-full uppercase"></span>
            <span id="modal-status-badge"
              class="px-2.5 py-0.5 bg-white/20 text-white text-xs font-bold rounded-full"></span>
          </div>
          <h3 class="text-xl font-bold text-white" id="modal-order-id">—</h3>
          <p class="text-primary-200 text-xs mt-0.5" id="modal-order-sub">
            —
          </p>
        </div>
        <button onclick="closeModal('orderModal')" class="text-white/70 hover:text-white transition mt-1">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <!-- Platform Source Bar -->
      <div id="d-platform-source-bar"
        class="px-5 py-2 flex items-center gap-2 border-b border-surface-100 text-xs font-medium text-gray-500 bg-surface-50">
        <span>Source:</span>
        <span id="d-platform-source-badge" class="px-2 py-0.5 rounded-full font-bold text-[11px]">—</span>
        <span class="mx-1 text-gray-300">|</span>
        <span>Batch:
          <span id="d-source-batch" class="font-bold text-gray-700">—</span></span>
        <span class="mx-1 text-gray-300">|</span>
        <span>Uploaded:
          <span id="d-source-date" class="text-gray-700">—</span></span>
      </div>
      <!-- Modal Tabs -->
      <div class="flex border-b border-surface-200 bg-surface-50 px-5 gap-1">
        <button onclick="switchModalTab('info')" id="mtab-info"
          class="modal-tab-active px-4 py-3 text-sm font-semibold border-b-2 border-primary-500 text-primary-600 -mb-px transition-all">
          <i class="fa-solid fa-circle-info mr-1.5"></i>Order Info
        </button>
        <button onclick="switchModalTab('product')" id="mtab-product"
          class="modal-tab-inactive px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-primary-600 -mb-px transition-all">
          <i class="fa-solid fa-box mr-1.5"></i>Product & Pricing
        </button>
        <button onclick="switchModalTab('shipping')" id="mtab-shipping"
          class="modal-tab-inactive px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-primary-600 -mb-px transition-all">
          <i class="fa-solid fa-truck mr-1.5"></i>Shipping
        </button>
        <button onclick="switchModalTab('buyer')" id="mtab-buyer"
          class="modal-tab-inactive px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-primary-600 -mb-px transition-all">
          <i class="fa-solid fa-user mr-1.5"></i>Buyer
        </button>
        <button onclick="switchModalTab('timeline')" id="mtab-timeline"
          class="modal-tab-inactive px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-primary-600 -mb-px transition-all">
          <i class="fa-solid fa-timeline mr-1.5"></i>Timeline
        </button>
      </div>
      <!-- Modal Content -->
      <div class="p-6 max-h-[65vh] overflow-y-auto">
        <!-- Tab: Order Info -->
        <div id="tab-info" class="modal-tab-content">
          <div class="grid grid-cols-2 gap-6">
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Order Information
              </p>
              <div class="space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Order ID</span><span class="detail-value font-mono text-xs"
                    id="d-order-id">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Batch ID</span><span class="detail-value font-mono text-xs"
                    id="d-batch-id">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Package ID</span><span class="detail-value font-mono text-xs"
                    id="d-package-id">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Platform</span><span class="detail-value" id="d-platform">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Order Status</span><span id="d-order-status-badge">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Cancel/Return Status</span><span class="detail-value"
                    id="d-cancel-return-status">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Payment Method</span><span class="detail-value"
                    id="d-payment-method">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Normal / Pre-order</span><span class="detail-value"
                    id="d-normal-preorder">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Fulfillment Type</span><span class="detail-value"
                    id="d-fulfillment-type">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Warehouse Name</span><span class="detail-value" id="d-warehouse">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Purchase Channel</span><span class="detail-value"
                    id="d-purchase-channel">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Product Category</span><span class="detail-value"
                    id="d-product-category">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Packed Status</span><span class="detail-value"
                    id="d-packed-status">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Ship Before</span><span class="detail-value text-amber-600"
                    id="d-ship-before-info">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Is Duplicate</span><span id="d-is-duplicate">—</span>
                </div>
              </div>
            </div>
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Notes
              </p>
              <div class="space-y-3">
                <div>
                  <p class="text-xs text-gray-500 mb-1" id="d-buyer-note-label">
                    Buyer Note / Catatan Pembeli
                  </p>
                  <div id="d-buyer-note"
                    class="bg-amber-50 border border-amber-100 rounded-xl p-3 text-sm text-gray-700 min-h-[60px]">
                    —
                  </div>
                </div>
                <div>
                  <p class="text-xs text-gray-500 mb-1" id="d-seller-note-label">
                    Seller Note / Catatan
                  </p>
                  <div id="d-seller-note"
                    class="bg-blue-50 border border-blue-100 rounded-xl p-3 text-sm text-gray-700 min-h-[60px]">
                    —
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Product & Pricing -->
        <div id="tab-product" class="modal-tab-content hidden">
          <div class="bg-surface-50 rounded-xl p-4 mb-5">
            <div class="flex items-start gap-4">
              <div
                class="w-14 h-14 bg-gradient-to-br from-primary-100 to-primary-200 rounded-xl flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-box text-primary-400 text-xl"></i>
              </div>
              <div class="flex-1">
                <p class="font-semibold text-gray-900 text-sm leading-snug" id="d-product-name">
                  —
                </p>
                <p class="text-xs text-gray-500 mt-0.5" id="d-variation-name">
                  —
                </p>
                <div class="flex items-center gap-2 mt-2 flex-wrap">
                  <span class="text-xs bg-white border border-surface-200 rounded-lg px-2 py-1">SKU ID:
                    <span id="d-sku-id" class="font-bold">—</span></span>
                  <span class="text-xs bg-white border border-surface-200 rounded-lg px-2 py-1">SKU Ref:
                    <span id="d-sku-ref" class="font-bold">—</span></span>
                  <span class="text-xs bg-white border border-surface-200 rounded-lg px-2 py-1">Weight:
                    <span id="d-weight" class="font-bold">—</span></span>
                </div>
              </div>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-6">
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Price & Quantity
              </p>
              <div class="space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Original Price (per unit)</span><span class="detail-value"
                    id="d-original-price">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Discounted Price</span><span class="detail-value"
                    id="d-discounted-price">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Platform Discount</span><span class="detail-value text-red-400"
                    id="d-sku-platform-discount">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Seller Discount</span><span class="detail-value text-red-400"
                    id="d-sku-seller-discount">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Total Discount</span><span class="detail-value text-red-400"
                    id="d-total-discount">—</span>
                </div>
                <div class="detail-row border-t border-surface-200 pt-2">
                  <span class="detail-label font-bold text-gray-700">Total Product Price</span><span
                    class="detail-value font-bold text-gray-900 text-sm" id="d-sku-subtotal-after">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Quantity</span><span class="detail-value" id="d-quantity">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Returned Qty</span><span class="detail-value text-red-500"
                    id="d-returned-qty">—</span>
                </div>
              </div>
            </div>
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Shipping Fees & Payment
              </p>
              <div class="space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Original Shipping Fee</span><span class="detail-value"
                    id="d-original-shipping-fee">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Fee Seller Disc.</span><span class="detail-value text-red-400"
                    id="d-shipping-seller-discount">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Fee Platform Disc.</span><span class="detail-value text-red-400"
                    id="d-shipping-platform-discount">—</span>
                </div>
                <div class="detail-row border-t border-surface-200 pt-2">
                  <span class="detail-label font-bold text-gray-700">Shipping Fee (Buyer Pays)</span><span
                    class="detail-value font-bold text-gray-900" id="d-shipping-fee-after-disc">—</span>
                </div>
                <div class="detail-row border-t border-surface-200 pt-2">
                  <span class="detail-label font-bold text-gray-700">Total Payment</span><span
                    class="detail-value font-bold text-primary-600 text-sm" id="d-order-amount">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Order Refund Amount</span><span class="detail-value text-red-600"
                    id="d-refund-amount">—</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Shipping -->
        <div id="tab-shipping" class="modal-tab-content hidden">
          <div class="grid grid-cols-2 gap-6">
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Shipping Info
              </p>
              <div class="space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Tracking ID / No. Resi</span>
                  <span class="detail-value font-mono text-primary-600 flex items-center gap-1.5 justify-end">
                    <span id="d-tracking-number">—</span>
                    <button onclick="copyTracking()" class="text-gray-400 hover:text-primary-500 transition"
                      title="Copy">
                      <i class="fa-regular fa-copy text-xs"></i>
                    </button>
                  </span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Option</span><span class="detail-value"
                    id="d-shipping-option">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Provider</span><span class="detail-value"
                    id="d-shipping-provider">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Type</span><span class="detail-value"
                    id="d-shipping-type">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Ship Before</span><span class="detail-value text-amber-600"
                    id="d-ship-before">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Arranged Time</span><span class="detail-value"
                    id="d-arranged-time">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Fulfillment Type</span><span class="detail-value"
                    id="d-fulfillment-type-ship">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Warehouse Name</span><span class="detail-value"
                    id="d-warehouse-ship">—</span>
                </div>
              </div>
            </div>
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Delivery Address
              </p>
              <div class="bg-surface-50 rounded-xl p-4 space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Recipient Name</span><span class="detail-value"
                    id="d-recipient-name">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Phone Number</span><span class="detail-value" id="d-phone-number">—</span>
                </div>
                <p class="text-xs text-gray-700 leading-relaxed mt-1" id="d-full-address">
                  —
                </p>
                <div class="grid grid-cols-2 gap-2 mt-2">
                  <div>
                    <p class="text-[10px] text-gray-400">District</p>
                    <p class="text-xs font-semibold text-gray-700" id="d-district">
                      —
                    </p>
                  </div>
                  <div>
                    <p class="text-[10px] text-gray-400">City / Kota</p>
                    <p class="text-xs font-semibold text-gray-700" id="d-city">
                      —
                    </p>
                  </div>
                  <div>
                    <p class="text-[10px] text-gray-400">
                      Province / Provinsi
                    </p>
                    <p class="text-xs font-semibold text-gray-700" id="d-province">
                      —
                    </p>
                  </div>
                  <div>
                    <p class="text-[10px] text-gray-400">Postal Code</p>
                    <p class="text-xs font-semibold text-gray-700" id="d-postal-code">
                      —
                    </p>
                  </div>
                  <div>
                    <p class="text-[10px] text-gray-400">Country</p>
                    <p class="text-xs font-semibold text-gray-700" id="d-country">
                      —
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Buyer -->
        <div id="tab-buyer" class="modal-tab-content hidden">
          <div class="flex items-center gap-4 p-4 bg-surface-50 rounded-xl mb-5">
            <div
              class="w-14 h-14 rounded-full bg-gradient-to-br from-violet-400 to-violet-600 flex items-center justify-center text-white font-bold text-xl flex-shrink-0"
              id="d-buyer-avatar">
              ?
            </div>
            <div>
              <p class="font-bold text-gray-900 text-base" id="d-buyer-username">
                —
              </p>
              <p class="text-xs text-gray-500 mt-0.5">
                Buyer Username / Username Pembeli
              </p>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-6">
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Buyer & Recipient Details
              </p>
              <div class="space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Recipient Name</span><span class="detail-value"
                    id="d-recipient-name-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Phone Number</span><span class="detail-value" id="d-phone-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">District</span><span class="detail-value" id="d-district-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">City / Kota</span><span class="detail-value" id="d-city-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Province / Provinsi</span><span class="detail-value"
                    id="d-province-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Postal Code</span><span class="detail-value" id="d-postal-code-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Country</span><span class="detail-value" id="d-country-b">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Address</span><span class="detail-value text-right"
                    id="d-address-b">—</span>
                </div>
              </div>
            </div>
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Buyer Note / Catatan Pembeli
              </p>
              <div id="d-buyer-note-b"
                class="bg-amber-50 border border-amber-100 rounded-xl p-4 text-sm text-gray-700 min-h-[80px]">
                —
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Timeline -->
        <div id="tab-timeline" class="modal-tab-content hidden">
          <div class="grid grid-cols-2 gap-6 mb-5">
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Timestamps
              </p>
              <div class="space-y-2">
                <div class="detail-row">
                  <span class="detail-label">Order Created</span><span class="detail-value text-xs"
                    id="d-ts-created">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Payment Time</span><span class="detail-value text-xs"
                    id="d-ts-paid">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipping Arranged</span><span class="detail-value text-xs"
                    id="d-ts-arranged">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Shipped</span><span class="detail-value text-xs" id="d-ts-shipped">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Delivered</span><span class="detail-value text-xs"
                    id="d-ts-delivered">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Order Completed</span><span class="detail-value text-xs"
                    id="d-ts-completed">—</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Cancelled</span><span class="detail-value text-xs text-red-500"
                    id="d-ts-cancelled">—</span>
                </div>
              </div>
            </div>
            <div>
              <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">
                Order Timeline
              </p>
              <div class="relative pl-6" id="order-timeline"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Footer -->
      <div class="px-6 py-4 border-t border-surface-100 flex items-center justify-end bg-surface-50">
        <button onclick="closeModal('orderModal')"
          class="px-5 py-2 bg-primary-500 text-white text-sm font-semibold rounded-xl hover:bg-primary-600 transition-all">
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- ═══════════════ MODALS ═══════════════ -->
  <!-- Seller Detail Modal -->
  <div id="sellerModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-overlay bg-black/30">
    <div class="modal-box bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden">
      <div class="bg-gradient-to-r from-violet-500 to-violet-700 p-6 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-white font-bold text-lg">
            BF
          </div>
          <div>
            <h3 class="text-lg font-bold text-white">BestFashion.id</h3>
            <p class="text-violet-200 text-sm">
              ID: SEL-2024-00001 · Joined Jan 15, 2024
            </p>
          </div>
        </div>
        <button onclick="closeModal('sellerModal')" class="text-white/70 hover:text-white transition">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="p-6">
        <div class="grid grid-cols-3 gap-4 mb-6">
          <div class="bg-surface-50 rounded-xl p-4 text-center">
            <p class="text-2xl font-bold text-gray-900">Rp 298M</p>
            <p class="text-xs text-gray-500 mt-1">Total Revenue</p>
            <p class="text-xs text-emerald-600 font-semibold">↑ +18% MoM</p>
          </div>
          <div class="bg-surface-50 rounded-xl p-4 text-center">
            <p class="text-2xl font-bold text-gray-900">4,821</p>
            <p class="text-xs text-gray-500 mt-1">Total Orders</p>
            <p class="text-xs text-emerald-600 font-semibold">
              ↑ +321 orders
            </p>
          </div>
          <div class="bg-surface-50 rounded-xl p-4 text-center">
            <p class="text-2xl font-bold text-gray-900">4.9 ★</p>
            <p class="text-xs text-gray-500 mt-1">Seller Rating</p>
            <p class="text-xs text-gray-400 font-semibold">1,248 reviews</p>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4 mb-5">
          <div>
            <p class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">
              Seller Info
            </p>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span class="text-gray-500">Email</span><span
                  class="font-medium text-gray-800">bestfashion@email.com</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-500">Phone</span><span class="font-medium text-gray-800">+62 812-3456-7890</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-500">Platform</span><span class="font-medium text-orange-600">Shopee</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-500">City</span><span class="font-medium text-gray-800">Jakarta Selatan</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-500">Category</span><span class="font-medium text-gray-800">Fashion &amp;
                  Apparel</span>
              </div>
            </div>
          </div>
          <div>
            <p class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">
              Performance
            </p>
            <div class="space-y-2.5">
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span class="text-gray-500">Fulfillment Rate</span><span
                    class="font-bold text-emerald-600">98.2%</span>
                </div>
                <div class="w-full bg-surface-200 h-1.5 rounded-full">
                  <div class="bg-emerald-500 h-full rounded-full" style="width: 98.2%"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span class="text-gray-500">Return Rate</span><span class="font-bold text-emerald-600">0.8%</span>
                </div>
                <div class="w-full bg-surface-200 h-1.5 rounded-full">
                  <div class="bg-blue-500 h-full rounded-full" style="width: 0.8%"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span class="text-gray-500">Response Time</span><span class="font-bold text-emerald-600">1.2
                    hrs</span>
                </div>
                <div class="w-full bg-surface-200 h-1.5 rounded-full">
                  <div class="bg-violet-500 h-full rounded-full" style="width: 85%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flex gap-3 pt-4 border-t border-surface-100">
          <button
            class="flex-1 py-2.5 bg-primary-500 text-white text-sm font-semibold rounded-xl hover:bg-primary-600 transition-all">
            View Full Profile
          </button>
          <button
            class="px-4 py-2.5 bg-amber-50 text-amber-700 text-sm font-semibold rounded-xl hover:bg-amber-100 transition-all">
            Send Warning
          </button>
          <button
            class="px-4 py-2.5 bg-red-50 text-red-600 text-sm font-semibold rounded-xl hover:bg-red-100 transition-all">
            Suspend
          </button>
          <button onclick="closeModal('sellerModal')"
            class="px-4 py-2.5 bg-surface-100 text-gray-600 text-sm font-semibold rounded-xl hover:bg-surface-200 transition-all">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Approve Sellers Modal -->
  <div id="approveModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-overlay bg-black/30">
    <div class="modal-box bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden">
      <div class="p-6 border-b border-surface-200 flex items-center justify-between">
        <h3 class="text-base font-bold text-gray-900">
          Pending Seller Approvals
        </h3>
        <button onclick="closeModal('approveModal')" class="text-gray-400 hover:text-gray-700 transition">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="p-6 space-y-3 max-h-96 overflow-y-auto">
        <div class="flex items-center justify-between p-3 bg-surface-50 rounded-xl">
          <div class="flex items-center gap-3">
            <div
              class="w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg text-white text-xs font-bold flex items-center justify-center">
              TM
            </div>
            <div>
              <p class="text-sm font-semibold text-gray-900">TokoMaju123</p>
              <p class="text-xs text-gray-400">
                Shopee · Jakarta · Electronics
              </p>
            </div>
          </div>
          <div class="flex gap-2">
            <button
              class="px-3 py-1.5 bg-emerald-500 text-white text-xs font-semibold rounded-lg hover:bg-emerald-600 transition-all">
              Approve
            </button>
            <button
              class="px-3 py-1.5 bg-red-50 text-red-600 text-xs font-semibold rounded-lg hover:bg-red-100 transition-all">
              Reject
            </button>
          </div>
        </div>
        <div class="flex items-center justify-between p-3 bg-surface-50 rounded-xl">
          <div class="flex items-center gap-3">
            <div
              class="w-8 h-8 bg-gradient-to-br from-pink-400 to-pink-600 rounded-lg text-white text-xs font-bold flex items-center justify-center">
              BV
            </div>
            <div>
              <p class="text-sm font-semibold text-gray-900">
                BeautyVibes.co
              </p>
              <p class="text-xs text-gray-400">
                TikTok Shop · Bandung · Beauty
              </p>
            </div>
          </div>
          <div class="flex gap-2">
            <button
              class="px-3 py-1.5 bg-emerald-500 text-white text-xs font-semibold rounded-lg hover:bg-emerald-600 transition-all">
              Approve
            </button>
            <button
              class="px-3 py-1.5 bg-red-50 text-red-600 text-xs font-semibold rounded-lg hover:bg-red-100 transition-all">
              Reject
            </button>
          </div>
        </div>
        <div class="flex items-center justify-between p-3 bg-surface-50 rounded-xl">
          <div class="flex items-center gap-3">
            <div
              class="w-8 h-8 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-lg text-white text-xs font-bold flex items-center justify-center">
              FG
            </div>
            <div>
              <p class="text-sm font-semibold text-gray-900">FreshGrocery</p>
              <p class="text-xs text-gray-400">Tokopedia · Surabaya · Food</p>
            </div>
          </div>
          <div class="flex gap-2">
            <button
              class="px-3 py-1.5 bg-emerald-500 text-white text-xs font-semibold rounded-lg hover:bg-emerald-600 transition-all">
              Approve
            </button>
            <button
              class="px-3 py-1.5 bg-red-50 text-red-600 text-xs font-semibold rounded-lg hover:bg-red-100 transition-all">
              Reject
            </button>
          </div>
        </div>
      </div>
      <div class="px-6 py-4 border-t border-surface-100 flex justify-between items-center">
        <p class="text-xs text-gray-400">Showing 3 of 12 pending</p>
        <div class="flex gap-3">
          <button
            class="px-4 py-2 bg-emerald-500 text-white text-sm font-semibold rounded-xl hover:bg-emerald-600 transition-all">
            Approve All
          </button>
          <button onclick="closeModal('approveModal')"
            class="px-4 py-2 bg-surface-100 text-gray-600 text-sm font-semibold rounded-xl hover:bg-surface-200 transition-all">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Retry Sync Modal -->
  <div id="syncModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-overlay bg-black/30">
    <div class="modal-box bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden">
      <div class="p-6 border-b border-surface-200 flex items-center justify-between">
        <h3 class="text-base font-bold text-gray-900">
          Retry Failed Synchronizations
        </h3>
        <button onclick="closeModal('syncModal')" class="text-gray-400 hover:text-gray-700 transition">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="p-6">
        <div class="bg-red-50 border border-red-100 rounded-xl p-4 mb-5">
          <div class="flex items-center gap-2.5 mb-2">
            <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <p class="font-semibold text-red-800 text-sm">
              7 failed syncs detected
            </p>
          </div>
          <p class="text-xs text-red-700">
            Shopee: 3 · Tokopedia: 2 · Lazada: 2
          </p>
        </div>
        <div class="space-y-3">
          <label
            class="flex items-center gap-3 p-3 bg-surface-50 rounded-xl cursor-pointer hover:bg-surface-100 transition">
            <input type="checkbox" checked class="w-4 h-4 text-primary-500 rounded" />
            <span class="text-sm font-medium text-gray-700">Shopee (3 failed)</span>
            <span class="ml-auto text-xs text-orange-600 font-semibold">Rate Limit · Auth Error</span>
          </label>
          <label
            class="flex items-center gap-3 p-3 bg-surface-50 rounded-xl cursor-pointer hover:bg-surface-100 transition">
            <input type="checkbox" checked class="w-4 h-4 text-primary-500 rounded" />
            <span class="text-sm font-medium text-gray-700">Tokopedia (2 failed)</span>
            <span class="ml-auto text-xs text-amber-600 font-semibold">Timeout</span>
          </label>
          <label
            class="flex items-center gap-3 p-3 bg-surface-50 rounded-xl cursor-pointer hover:bg-surface-100 transition">
            <input type="checkbox" checked class="w-4 h-4 text-primary-500 rounded" />
            <span class="text-sm font-medium text-gray-700">Lazada (2 failed)</span>
            <span class="ml-auto text-xs text-red-600 font-semibold">HTTP 500</span>
          </label>
        </div>
      </div>
      <div class="px-6 py-4 border-t border-surface-100 flex gap-3">
        <button onclick="retrySync()"
          class="flex-1 py-2.5 bg-primary-500 text-white text-sm font-semibold rounded-xl hover:bg-primary-600 transition-all flex items-center justify-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          Retry Selected (7)
        </button>
        <button onclick="closeModal('syncModal')"
          class="px-4 py-2.5 bg-surface-100 text-gray-600 text-sm font-semibold rounded-xl hover:bg-surface-200 transition-all">
          Cancel
        </button>
      </div>
    </div>
  </div>

  <script>
    // ─── MOCK DATA ────────────────────────────────────────────────────────────
    const PLATFORMS = ["shopee", "tiktok"];
    const PLATFORM_LABELS = {
      shopee: "Shopee",
      tokopedia: "TikTok",
      tiktok: "TikTok",
    };
    const ORDER_STATUSES = ["To Confirm", "To Pack", "Packed", "Returned"];
    const SHIPPING_PROVIDERS = [
      "JNE",
      "J&T",
      "SiCepat",
      "Anteraja",
      "Tiki",
      "Ninja",
    ];
    const PRODUCT_NAMES = [
      "Kaos Polos Oversize Premium Cotton Unisex",
      "Sepatu Sneakers Casual Pria Wanita Terbaru 2024",
      "Skincare Set Whitening Series Original BPOM",
      "Tas Ransel Laptop 15 Inch Waterproof",
      "Sarung Bantal Tidur Memory Foam Set 2pcs",
      "Minyak Rambut Pomade Extra Hold All Day",
      "Jaket Bomber Pria Premium Fleece Lining",
      "Sepatu Boot Wanita Kulit Asli Premium",
      "Set Peralatan Masak Anti Lengket 5 Pcs",
      "Kacamata Minus Bingkai Titanium Tipis",
    ];
    const CITIES = [
      "Jakarta Selatan",
      "Surabaya",
      "Bandung",
      "Medan",
      "Makassar",
      "Semarang",
      "Palembang",
      "Tangerang",
    ];
    const PROVINCES = [
      "DKI Jakarta",
      "Jawa Timur",
      "Jawa Barat",
      "Sumatera Utara",
      "Sulawesi Selatan",
      "Jawa Tengah",
    ];
    const BUYER_NAMES = [
      "budi.santoso",
      "siti_rahayu99",
      "andika_wijaya",
      "dinda.puspita",
      "rizky_pratama",
      "larasati_88",
      "fajar.kusuma",
      "nabila_cantik",
      "hendra_s",
      "yeni.a",
    ];

    function randInt(a, b) {
      return Math.floor(Math.random() * (b - a + 1)) + a;
    }
    function randItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }
    function randPrice(mn, mx) {
      return Math.round(Math.random() * (mx - mn) + mn) * 1000;
    }
    function fmtRp(v) {
      return v == null ? "—" : "Rp " + Number(v).toLocaleString("id-ID");
    }
    function fmtDate(d) {
      if (!d) return null;
      return d.toLocaleDateString("id-ID", {
        day: "2-digit",
        month: "short",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
      });
    }
    function addDays(d, n) {
      const r = new Date(d);
      r.setDate(r.getDate() + n);
      return r;
    }
    function addHours(d, n) {
      const r = new Date(d);
      r.setHours(r.getHours() + n);
      return r;
    }

    function generateOrders(n) {
      const orders = [];
      for (let i = 0; i < n; i++) {
        const platform = randItem(PLATFORMS);
        const status = randItem(ORDER_STATUSES);
        const isShopee = platform === "shopee";
        const orderDate = new Date(Date.now() - randInt(1, 180) * 86400000);
        const paymentDate = addHours(orderDate, randInt(1, 12));
        const isShipped = status === "Packed" || status === "Returned";
        const shipDate = isShipped
          ? addDays(paymentDate, randInt(1, 3))
          : null;
        const deliveredDate =
          status === "Packed" && Math.random() < 0.5
            ? addDays(shipDate, randInt(2, 5))
            : null;
        const cancelledDate =
          status === "Returned" ? addDays(paymentDate, randInt(1, 7)) : null;
        const rtsDate =
          !isShopee && isShipped ? addDays(paymentDate, 1) : null;

        // Pricing — exact DB column names
        const original_price = randPrice(50, 500);
        const discounted_price = Math.round(
          original_price * (1 - randInt(0, 30) / 100),
        );
        const qty = randInt(1, 5);
        const platform_discount = Math.round(
          (original_price * qty * randInt(0, 15)) / 100,
        );
        const seller_discount = Math.round(
          (original_price * qty * randInt(0, 10)) / 100,
        );
        const total_product_price =
          original_price * qty - platform_discount - seller_discount;
        const original_shipping_fee = randPrice(9, 30);
        const shipping_fee_seller_discount =
          Math.random() < 0.3 ? randPrice(0, 5) : 0;
        const shipping_fee_platform_discount =
          Math.random() < 0.4 ? randPrice(0, 8) : 0;
        const shipping_fee_buyer = Math.max(
          0,
          original_shipping_fee -
          shipping_fee_seller_discount -
          shipping_fee_platform_discount,
        );
        const total_payment = total_product_price + shipping_fee_buyer;
        const order_refund_amount =
          status === "Returned" ? Math.round(total_payment * 0.9) : 0;
        const total_discount = platform_discount + seller_discount;

        const buyer = randItem(BUYER_NAMES);
        const city = randItem(CITIES);
        const batchNo = String(Math.floor(i / 50) + 1).padStart(4, "0");

        orders.push({
          // ── Identity ────────────────────────────────────────────────────────
          id: "UO" + String(i + 1).padStart(8, "0"),
          batch_id: "BATCH" + batchNo,
          platform,
          order_id:
            (isShopee ? "SP" : "TT") + randInt(1000000000, 9999999999),
          packed_status: null,

          // ── Status ──────────────────────────────────────────────────────────
          order_status: status,
          cancellation_return_status:
            status === "Returned"
              ? isShopee
                ? randItem([
                  "Pengembalian Diminta",
                  "Pengembalian Diterima",
                  "Dana Dikembalikan",
                ])
                : randItem([
                  "Buyer Requested Return",
                  "Seller Requested Cancel",
                  "Platform Cancelled",
                ])
              : null,

          // ── Shipping ────────────────────────────────────────────────────────
          tracking_number: isShipped
            ? randItem(["JNE", "JT", "SCP", "ANT"]) +
            randInt(100000000, 999999999)
            : null,
          shipping_option: randItem([
            "Standard",
            "Express",
            "Same Day",
            "Economy",
          ]),
          shipping_provider: randItem(SHIPPING_PROVIDERS),
          shipping_type: isShopee
            ? randItem(["Antar ke Counter", "Pick-up by Courier"])
            : null,
          ship_before: isShopee ? fmtDate(addDays(paymentDate, 3)) : null,
          shipping_arranged_time:
            isShopee && shipDate ? fmtDate(shipDate) : null,

          // ── Timestamps ──────────────────────────────────────────────────────
          order_created_time: fmtDate(orderDate),
          _orderDateMs: orderDate.getTime(),
          payment_time: fmtDate(paymentDate),
          shipped_time: shipDate ? fmtDate(shipDate) : null,
          delivered_time: deliveredDate ? fmtDate(deliveredDate) : null,
          cancelled_time: cancelledDate ? fmtDate(cancelledDate) : null,
          order_completed_time:
            isShopee && deliveredDate
              ? fmtDate(addDays(deliveredDate, 5))
              : null,

          // ── Payment ─────────────────────────────────────────────────────────
          payment_method: randItem([
            "COD",
            "Bank Transfer",
            "ShopeePay",
            "OVO",
            "GoPay",
            "Credit Card",
            "QRIS",
          ]),

          // ── Product ─────────────────────────────────────────────────────────
          sku_id: "SKU" + randInt(10000, 99999),
          sku_reference: isShopee ? "REF-" + randInt(1000, 9999) : null,
          product_name: randItem(PRODUCT_NAMES),
          variation_name: randItem([
            "Black / L",
            "White / M",
            "Navy / XL",
            "Grey / S",
            "Red / XXL",
            null,
          ]),
          original_price,
          discounted_price,
          quantity: qty,
          returned_quantity: status === "Returned" ? randInt(1, qty) : 0,
          total_product_price,
          total_discount,
          seller_discount,
          platform_discount,
          product_weight: (randInt(100, 2000) / 1000).toFixed(3) + " kg",

          // ── Shipping fees ────────────────────────────────────────────────────
          shipping_fee_buyer,
          original_shipping_fee,
          shipping_fee_seller_discount,
          shipping_fee_platform_discount,
          total_payment,
          order_refund_amount,

          // ── Notes ────────────────────────────────────────────────────────────
          buyer_note:
            Math.random() < 0.3
              ? randItem([
                "Please wrap carefully!",
                "Fragile – handle with care",
                "Urgent, need tomorrow",
                null,
              ])
              : null,
          seller_note:
            Math.random() < 0.15
              ? randItem(["Checked & packed", "Ready to ship", null])
              : null,

          // ── Buyer / Address ──────────────────────────────────────────────────
          buyer_username: buyer,
          recipient_name: buyer
            .replace(/[._0-9]/g, " ")
            .trim()
            .replace(/\b\w/g, (c) => c.toUpperCase()),
          phone_number:
            "08" +
            randInt(11, 99) +
            "-" +
            randInt(1000, 9999) +
            "-" +
            randInt(1000, 9999),
          shipping_address:
            "Jl. " +
            randItem([
              "Merdeka",
              "Sudirman",
              "Gatot Subroto",
              "Diponegoro",
              "Pahlawan",
            ]) +
            " No. " +
            randInt(1, 200),
          district: !isShopee
            ? randItem([
              "Kebayoran Baru",
              "Menteng",
              "Tanah Abang",
              "Kemayoran",
              "Cempaka Putih",
            ])
            : null,
          city,
          province: randItem(PROVINCES),
          postal_code: String(randInt(10000, 99999)),
          country: "Indonesia",

          // ── TikTok-only fields (null for Shopee) ─────────────────────────────
          normal_or_preorder: !isShopee
            ? randItem(["Normal", "Pre-order"])
            : null,
          fulfillment_type: !isShopee
            ? randItem(["FBS", "FBT", "Dropship", "Fulfilled by Seller"])
            : null,
          warehouse_name: !isShopee
            ? randItem([
              "WH Jakarta",
              "WH Surabaya",
              "WH Bandung",
              "WH Medan",
            ])
            : null,
          product_category: !isShopee
            ? randItem([
              "Fashion & Apparel",
              "Footwear",
              "Beauty & Personal Care",
              "Bags",
              "Home & Living",
              "Consumer Electronics",
            ])
            : null,
          package_id: !isShopee ? "PKG" + randInt(100000, 999999) : null,
          purchase_channel: !isShopee
            ? randItem([
              "Mobile App",
              "Web Browser",
              "Live Shopping",
              "Search Ads",
            ])
            : null,

          // ── Flags ────────────────────────────────────────────────────────────
          is_duplicate: Math.random() < 0.012,
        });
      }
      return orders;
    }

    const ALL_ORDERS = generateOrders(500);
    let filteredOrders = [...ALL_ORDERS];
    let currentPage = 1;
    let currentTab = "all";
    let sortKey = null,
      sortDir = 1;

    const PLATFORM_STYLES = {
      shopee: { bg: "bg-orange-100", text: "text-orange-700" },
      tokopedia: { bg: "bg-gray-200", text: "text-black-700" },
      tiktok: { bg: "bg-gray-200", text: "text-black-700" },
    };
    function platformBadge(p) {
      const s = PLATFORM_STYLES[p] || {
        bg: "bg-gray-100",
        text: "text-gray-700",
      };
      return `<span class="badge ${s.bg} ${s.text}">${PLATFORM_LABELS[p] || p}</span>`;
    }
    function statusBadge(s) {
      const map = {
        "To Confirm": "bg-amber-100 text-amber-700",
        "To Pack": "bg-blue-100 text-blue-700",
        Packed: "bg-emerald-100 text-emerald-700",
        Returned: "bg-purple-100 text-purple-700",
      };
      const dot = {
        "To Confirm": "bg-amber-500",
        "To Pack": "bg-blue-500",
        Packed: "bg-emerald-500",
        Returned: "bg-purple-500",
      };
      return `<span class="badge ${map[s] || "bg-gray-100 text-gray-600"}"><span class="w-1.5 h-1.5 rounded-full ${dot[s] || "bg-gray-400"} inline-block"></span>${s}</span>`;
    }

    function renderTable() {
      const perPage = parseInt(document.getElementById("per-page").value);
      const tbody = document.getElementById("order-table-body");
      const totalPages = Math.max(
        1,
        Math.ceil(filteredOrders.length / perPage),
      );
      if (currentPage > totalPages) currentPage = 1;
      const start = (currentPage - 1) * perPage;
      const slice = filteredOrders.slice(start, start + perPage);

      document.getElementById("count-num").textContent =
        filteredOrders.length.toLocaleString("id-ID");
      document.getElementById("count-total").textContent =
        ALL_ORDERS.length.toLocaleString("id-ID");
      document.getElementById("curr-page").textContent = currentPage;
      document.getElementById("total-pages").textContent = totalPages;

      if (!slice.length) {
        tbody.innerHTML = `<tr><td colspan="11" class="text-center py-16 text-gray-400"><i class="fa-solid fa-box-open text-3xl mb-3 block text-gray-300"></i>No orders found</td></tr>`;
        renderPagination(0, perPage);
        return;
      }
      tbody.innerHTML = slice
        .map(
          (o) => `
      <tr class="table-row-hover transition-colors ${o.is_duplicate ? "bg-amber-50" : ""}" onclick="openOrderModal('${o.id}')">
        <td class="px-4 py-3" onclick="event.stopPropagation()"><input type="checkbox" class="row-check rounded" value="${o.id}"></td>
        <td class="px-4 py-3 text-xs text-gray-400 font-medium">${(currentPage - 1) * perPage + slice.indexOf(o) + 1}</td>
        <td class="px-4 py-3">
          <p class="text-xs font-bold text-gray-900 font-mono">${o.order_id}</p>
        </td>
        <td class="px-4 py-3">${platformBadge(o.platform)}</td>
        <td class="px-4 py-3 max-w-[180px]">
          <p class="text-xs font-semibold text-gray-800 truncate" title="${o.product_name}">${o.product_name}</p>
          ${o.variation_name ? `<p class="text-[10px] text-gray-400 mt-0.5">${o.variation_name}</p>` : ""}
        </td>
        <td class="px-4 py-3">
          <p class="text-xs font-medium text-gray-800">${o.buyer_username}</p>
          <p class="text-[10px] text-gray-400 mt-0.5">${o.city}</p>
        </td>
        <td class="px-4 py-3">${statusBadge(o.order_status)}</td>
        <td class="px-4 py-3">
          ${o.tracking_number
              ? `<p class="text-xs font-mono text-primary-600 font-medium">${o.tracking_number}</p><p class="text-[10px] text-gray-400">${o.shipping_provider}</p>`
              : `<span class="text-xs text-gray-300">—</span>`
            }
        </td>
        <td class="px-4 py-3 text-right">
          <p class="text-xs font-bold text-gray-900">${fmtRp(o.total_payment)}</p>
        </td>
        <td class="px-4 py-3 whitespace-nowrap"><p class="text-xs text-gray-700">${o.order_created_time || "—"}</p></td>
      </tr>
    `,
        )
        .join("");
      renderPagination(filteredOrders.length, perPage);
    }

    function renderPagination(total, perPage) {
      const totalPages = Math.ceil(total / perPage);
      const container = document.getElementById("pagination-buttons");
      if (totalPages <= 1) {
        container.innerHTML = "";
        return;
      }
      const btnBase =
        "w-8 h-8 flex items-center justify-center rounded-lg text-sm font-medium transition-all";
      const prev = currentPage > 1,
        next = currentPage < totalPages;
      let html = `<button onclick="goPage(${currentPage - 1})" ${!prev ? "disabled" : ""} class="${btnBase} ${prev ? "hover:bg-surface-200 text-gray-600" : "text-gray-300 cursor-not-allowed"}"><i class="fa-solid fa-chevron-left text-xs"></i></button>`;
      const pages = [
        ...new Set([
          1,
          totalPages,
          ...Array.from({ length: 5 }, (_, i) => currentPage - 2 + i).filter(
            (p) => p > 1 && p < totalPages,
          ),
        ]),
      ].sort((a, b) => a - b);
      let prev_p = null;
      pages.forEach((p) => {
        if (prev_p !== null && p - prev_p > 1)
          html += `<span class="w-8 h-8 flex items-center justify-center text-gray-400">…</span>`;
        html += `<button onclick="goPage(${p})" class="${btnBase} ${p === currentPage ? "bg-primary-500 text-white shadow shadow-primary-500/30" : "hover:bg-surface-200 text-gray-600"}">${p}</button>`;
        prev_p = p;
      });
      html += `<button onclick="goPage(${currentPage + 1})" ${!next ? "disabled" : ""} class="${btnBase} ${next ? "hover:bg-surface-200 text-gray-600" : "text-gray-300 cursor-not-allowed"}"><i class="fa-solid fa-chevron-right text-xs"></i></button>`;
      container.innerHTML = html;
    }

    function goPage(p) {
      const perPage = parseInt(document.getElementById("per-page").value);
      const totalPages = Math.ceil(filteredOrders.length / perPage);
      if (p < 1 || p > totalPages) return;
      currentPage = p;
      renderTable();
    }

    function filterTable() {
      const search = document
        .getElementById("search-input")
        .value.toLowerCase();
      const platform = document.getElementById("filter-platform").value;
      const status = document
        .getElementById("filter-status")
        .value.toLowerCase();
      const dup = document.getElementById("filter-duplicate").value;
      const dateFrom = document.getElementById("filter-date-from").value;
      const dateTo = document.getElementById("filter-date-to").value;
      const msFrom = dateFrom ? new Date(dateFrom).getTime() : null;
      const msTo = dateTo ? new Date(dateTo).getTime() + 86399999 : null;
      filteredOrders = ALL_ORDERS.filter((o) => {
        const ms =
          !search ||
          [
            o.order_id,
            o.tracking_number,
            o.buyer_username,
            o.product_name,
            o.recipient_name,
          ].some((v) => v && v.toLowerCase().includes(search));
        const mp =
          !platform ||
          (platform === "tiktok"
            ? o.platform === "tiktok" || o.platform === "tokopedia"
            : o.platform === platform);
        const mst = !status || o.order_status.toLowerCase() === status;
        const md = !dup || String(o.is_duplicate) === dup;
        const mt =
          currentTab === "all"
            ? true
            : o.order_status.toLowerCase() === currentTab;
        const mdf = !msFrom || o._orderDateMs >= msFrom;
        const mdt = !msTo || o._orderDateMs <= msTo;
        return ms && mp && mst && md && mt && mdf && mdt;
      });
      if (sortKey) applySort();
      currentPage = 1;
      renderTable();
    }

    function resetFilter() {
      [
        "search-input",
        "filter-platform",
        "filter-status",
        "filter-duplicate",
        "filter-date-from",
        "filter-date-to",
      ].forEach((id) => {
        document.getElementById(id).value = "";
      });
      filterTable();
    }

    function setTab(btn, tab) {
      currentTab = tab;
      document.querySelectorAll(".tab-btn").forEach((b) => {
        b.classList.remove("tab-active");
        b.classList.add("tab-inactive");
      });
      btn.classList.add("tab-active");
      btn.classList.remove("tab-inactive");
      filterTable();
    }

    function sortTable(key) {
      if (sortKey === key) sortDir *= -1;
      else {
        sortKey = key;
        sortDir = 1;
      }
      applySort();
      renderTable();
    }
    function applySort() {
      filteredOrders.sort((a, b) => {
        let va = a[sortKey],
          vb = b[sortKey];
        if (va == null) return 1;
        if (vb == null) return -1;
        return (
          (typeof va === "string" ? va.localeCompare(vb) : va - vb) * sortDir
        );
      });
    }

    function setText(id, val) {
      const el = document.getElementById(id);
      if (el)
        el.textContent =
          val != null && val !== "" && val !== undefined ? val : "—";
    }
    function setHtml(id, html) {
      const el = document.getElementById(id);
      if (el) el.innerHTML = html;
    }
    function fmtDisc(v) {
      return v != null && v > 0 ? "-" + fmtRp(v) : "—";
    }
    function fmtFee(v) {
      return v != null && v > 0 ? fmtRp(v) : "—";
    }

    function openOrderModal(id) {
      const o = ALL_ORDERS.find((x) => x.id === id);
      if (!o) return;
      const isShopee = o.platform === "shopee";
      const isTikTok = o.platform === "tiktok" || o.platform === "tokopedia";

      // ── Platform source bar ───────────────────────────────────────────────────
      const pStyle = PLATFORM_STYLES[o.platform] || {
        bg: "bg-gray-100",
        text: "text-gray-700",
      };
      const sourceBadge = document.getElementById("d-platform-source-badge");
      sourceBadge.textContent = PLATFORM_LABELS[o.platform] || o.platform;
      sourceBadge.className = `px-2 py-0.5 rounded-full font-bold text-[11px] ${pStyle.bg} ${pStyle.text}`;
      setText("d-source-batch", isShopee ? o.batch_id : o.package_id);
      setText("d-source-date", o.order_created_time);

      // ── Modal header ──────────────────────────────────────────────────────────
      setText("modal-order-id", o.order_id);
      setText(
        "modal-platform-badge",
        PLATFORM_LABELS[o.platform] || o.platform,
      );
      setText("modal-status-badge", o.order_status);
      const subRef = isShopee
        ? `Batch: ${o.batch_id || "—"}`
        : `Package: ${o.package_id || "—"}`;
      setText(
        "modal-order-sub",
        `${subRef}  ·  ${o.order_created_time || "—"}`,
      );

      // ══ TAB: ORDER INFO ═══════════════════════════════════════════════════════
      setText("d-order-id", o.order_id);
      setText("d-batch-id", o.batch_id);
      setText("d-package-id", o.package_id);
      setText("d-platform", PLATFORM_LABELS[o.platform]);
      setHtml("d-order-status-badge", statusBadge(o.order_status));
      setText("d-cancel-return-status", o.cancellation_return_status);
      setText("d-payment-method", o.payment_method);
      setText("d-normal-preorder", o.normal_or_preorder);
      setText("d-fulfillment-type", o.fulfillment_type);
      setText("d-warehouse", o.warehouse_name);
      setText("d-purchase-channel", o.purchase_channel);
      setText("d-product-category", o.product_category);
      setText("d-packed-status", o.packed_status);
      setText("d-ship-before-info", o.ship_before);
      setHtml(
        "d-is-duplicate",
        o.is_duplicate
          ? `<span class="badge bg-amber-100 text-amber-700"><i class="fa-solid fa-copy text-[9px]"></i> Yes, Duplicate</span>`
          : `<span class="badge bg-emerald-100 text-emerald-700"><i class="fa-solid fa-check text-[9px]"></i> No</span>`,
      );
      document.getElementById("d-buyer-note").textContent =
        o.buyer_note || "No notes from buyer";
      document.getElementById("d-seller-note").textContent =
        o.seller_note || "No seller notes";

      // ══ TAB: PRODUCT & PRICING ════════════════════════════════════════════════
      setText("d-product-name", o.product_name);
      setText("d-variation-name", o.variation_name || "No variation");
      setText("d-sku-id", o.sku_id);
      setText("d-sku-ref", o.sku_reference);
      setText("d-weight", o.product_weight);

      // Price & Quantity
      setText("d-original-price", fmtRp(o.original_price));
      setText("d-discounted-price", fmtRp(o.discounted_price));
      setText("d-sku-platform-discount", fmtDisc(o.platform_discount));
      setText("d-sku-seller-discount", fmtDisc(o.seller_discount));
      setText("d-total-discount", fmtDisc(o.total_discount));
      setText("d-sku-subtotal-after", fmtRp(o.total_product_price));
      setText("d-quantity", o.quantity + " pcs");
      setText(
        "d-returned-qty",
        o.returned_quantity > 0 ? o.returned_quantity + " pcs" : "0",
      );

      // Shipping Fees & Payment
      setText("d-original-shipping-fee", fmtRp(o.original_shipping_fee));
      setText(
        "d-shipping-seller-discount",
        fmtDisc(o.shipping_fee_seller_discount),
      );
      setText(
        "d-shipping-platform-discount",
        fmtDisc(o.shipping_fee_platform_discount),
      );
      setText("d-shipping-fee-after-disc", fmtRp(o.shipping_fee_buyer));
      setText("d-order-amount", fmtRp(o.total_payment));
      setText(
        "d-refund-amount",
        o.order_refund_amount > 0 ? fmtRp(o.order_refund_amount) : "—",
      );

      // ══ TAB: SHIPPING ══════════════════════════════════════════════════════════
      const tn = document.getElementById("d-tracking-number");
      if (tn) {
        tn.textContent = o.tracking_number || "—";
        tn.dataset.copy = o.tracking_number || "";
      }
      setText("d-shipping-option", o.shipping_option);
      setText("d-shipping-provider", o.shipping_provider);
      // Shopee-only
      setText("d-shipping-type", o.shipping_type);
      setText("d-ship-before", o.ship_before);
      setText("d-arranged-time", o.shipping_arranged_time);
      // TikTok-only
      setText("d-fulfillment-type-ship", o.fulfillment_type);
      setText("d-warehouse-ship", o.warehouse_name);
      // Address
      setText("d-recipient-name", o.recipient_name);
      setText("d-phone-number", o.phone_number);
      document.getElementById("d-full-address").textContent =
        o.shipping_address || "—";
      setText("d-district", o.district);
      setText("d-city", o.city);
      setText("d-province", o.province);
      setText("d-postal-code", o.postal_code);
      setText("d-country", o.country);

      // ══ TAB: BUYER ════════════════════════════════════════════════════════════
      document.getElementById("d-buyer-avatar").textContent = (
        o.buyer_username || "?"
      )
        .slice(0, 2)
        .toUpperCase();
      setText("d-buyer-username", o.buyer_username);
      setText("d-recipient-name-b", o.recipient_name);
      setText("d-phone-b", o.phone_number);
      setText("d-district-b", o.district);
      setText("d-city-b", o.city);
      setText("d-province-b", o.province);
      setText("d-postal-code-b", o.postal_code);
      setText("d-country-b", o.country);
      setText("d-address-b", o.shipping_address);
      document.getElementById("d-buyer-note-b").textContent =
        o.buyer_note || "No notes from buyer";

      // ══ TAB: TIMELINE ═════════════════════════════════════════════════════════
      // Timestamps panel
      setText("d-ts-created", o.order_created_time);
      setText("d-ts-paid", o.payment_time);
      setText("d-ts-arranged", o.shipping_arranged_time);
      setText("d-ts-shipped", o.shipped_time);
      setText("d-ts-delivered", o.delivered_time);
      setText("d-ts-completed", o.order_completed_time);
      setText("d-ts-cancelled", o.cancelled_time);

      // Timeline visual
      const timelineEvents = [
        {
          label: "Order Created",
          time: o.order_created_time,
          color: "bg-gray-500",
          done: !!o.order_created_time,
        },
        {
          label: "Payment Received",
          time: o.payment_time,
          color: "bg-primary-500",
          done: !!o.payment_time,
        },
        ...(isShopee && o.shipping_arranged_time
          ? [
            {
              label: "Shipping Arranged",
              time: o.shipping_arranged_time,
              color: "bg-blue-400",
              done: true,
            },
          ]
          : []),
        ...(isTikTok && o.rts_time
          ? [
            {
              label: "Ready to Ship (RTS)",
              time: o.rts_time,
              color: "bg-cyan-500",
              done: true,
            },
          ]
          : []), // rts_time not in DB schema, always skipped
        {
          label: "Shipped",
          time: o.shipped_time,
          color: "bg-indigo-500",
          done: !!o.shipped_time,
        },
        {
          label: "Delivered",
          time: o.delivered_time,
          color: "bg-emerald-500",
          done: !!o.delivered_time,
        },
        ...(isShopee && o.order_completed_time
          ? [
            {
              label: "Order Completed",
              time: o.order_completed_time,
              color: "bg-emerald-600",
              done: true,
            },
          ]
          : []),
        ...(o.cancelled_time
          ? [
            {
              label: "Cancelled",
              time: o.cancelled_time,
              color: "bg-red-500",
              done: true,
            },
          ]
          : []),
      ].filter((t) => t.done && t.time);
      document.getElementById("order-timeline").innerHTML =
        timelineEvents.length
          ? timelineEvents
            .map(
              (t, i) => `
          <div class="relative flex items-start gap-4 pb-6 ${i < timelineEvents.length - 1 ? "border-l-2 border-surface-200" : ""} ml-3">
            <div class="absolute -left-[13px] w-6 h-6 rounded-full ${t.color} flex items-center justify-center flex-shrink-0 shadow-sm">
              <i class="fa-solid fa-check text-white text-[8px]"></i>
            </div>
            <div class="pl-5">
              <p class="text-sm font-semibold text-gray-800">${t.label}</p>
              <p class="text-xs text-gray-400 mt-0.5">${t.time}</p>
            </div>
          </div>`,
            )
            .join("")
          : `<p class="text-sm text-gray-400">No timeline events available.</p>`;

      switchModalTab("info");
      document.getElementById("orderModal").classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }

    function copyTracking() {
      const val = document.getElementById("d-tracking-number").dataset.copy;
      if (!val) return;
      navigator.clipboard.writeText(val).then(() => {
        const btn = document.querySelector(
          '#tab-shipping button[onclick="copyTracking()"]',
        );
        if (btn) {
          btn.innerHTML =
            '<i class="fa-solid fa-check text-emerald-500 text-xs"></i>';
          setTimeout(() => {
            btn.innerHTML = '<i class="fa-regular fa-copy text-xs"></i>';
          }, 1500);
        }
      });
    }

    function switchModalTab(tab) {
      document
        .querySelectorAll(".modal-tab-content")
        .forEach((el) => el.classList.add("hidden"));
      document.getElementById(`tab-${tab}`).classList.remove("hidden");
      document.querySelectorAll('[id^="mtab-"]').forEach((btn) => {
        btn.classList.remove("border-primary-500", "text-primary-600");
        btn.classList.add("border-transparent", "text-gray-500");
      });
      const a = document.getElementById(`mtab-${tab}`);
      if (a) {
        a.classList.add("border-primary-500", "text-primary-600");
        a.classList.remove("border-transparent", "text-gray-500");
      }
    }

    function toggleAllCheckbox(master) {
      document
        .querySelectorAll(".row-check")
        .forEach((c) => (c.checked = master.checked));
    }

    function exportData(btn) {
      btn.innerHTML =
        '<i class="fa-solid fa-spinner fa-spin mr-1"></i> Exporting…';
      btn.disabled = true;
      setTimeout(() => {
        btn.innerHTML =
          '<i class="fa-solid fa-check mr-1 text-emerald-500"></i> Done!';
        setTimeout(() => {
          btn.innerHTML =
            '<i class="fa-solid fa-download text-gray-500 mr-1"></i> Export CSV';
          btn.disabled = false;
        }, 1500);
      }, 1500);
    }

    // ─── EXISTING SCRIPTS (dropdown, profile, modal helpers, clock) ──────────
    function toggleDropdown(id) {
      const dropdown = document.getElementById(`${id}-dropdown`);
      const arrow = document.getElementById(`${id}-arrow`);
      const isOpen = dropdown.classList.contains("open");
      document
        .querySelectorAll(".dropdown-content")
        .forEach((d) => d.classList.remove("open"));
      document
        .querySelectorAll('[id$="-arrow"]')
        .forEach((a) => (a.style.transform = "rotate(0)"));
      if (!isOpen) {
        dropdown.classList.add("open");
        arrow.style.transform = "rotate(180deg)";
      }
    }

    // Profile dropdown
    function toggleProfileDropdown() {
      document.getElementById("profile-dropdown").classList.toggle("hidden");
    }
    document.addEventListener("click", (e) => {
      const pd = document.getElementById("profile-dropdown");
      if (!e.target.closest('[onclick="toggleProfileDropdown()"]')) {
        if (!pd.contains(e.target)) pd.classList.add("hidden");
      }
    });

    // Chart period
    function setChartPeriod(period, btn) {
      btn
        .closest(".flex")
        .querySelectorAll("button")
        .forEach((b) => {
          b.classList.remove("bg-primary-50", "text-primary-600");
          b.classList.add("text-gray-500");
        });
      btn.classList.add("bg-primary-50", "text-primary-600");
      btn.classList.remove("text-gray-500");
    }

    // Modal
    function openModal(id) {
      document.getElementById(id).classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }
    function closeModal(id) {
      document.getElementById(id).classList.add("hidden");
      document.body.style.overflow = "";
    }
    // Close modal on overlay click
    document.querySelectorAll('[id$="Modal"]').forEach((m) => {
      m.addEventListener("click", function (e) {
        if (e.target === this) closeModal(this.id);
      });
    });

    // Retry sync simulation
    function retrySync() {
      const btn = document.querySelector(
        '#syncModal button[onclick="retrySync()"]',
      );
      btn.innerHTML =
        '<svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg> Retrying…';
      btn.disabled = true;
      setTimeout(() => {
        btn.innerHTML = "✓ Retry Complete";
        btn.classList.remove("bg-primary-500");
        btn.classList.add("bg-emerald-500");
        setTimeout(() => closeModal("syncModal"), 1000);
      }, 2000);
    }

    // Live clock
    function updateClock() {
      const now = new Date();
      const time = now.toLocaleTimeString("id-ID", {
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
      });
      const date = now.toLocaleDateString("id-ID", {
        day: "2-digit",
        month: "short",
        year: "numeric",
      });
      const el = document.getElementById("live-clock");
      if (el) el.textContent = `${date}  ${time}`;
    }
    updateClock();
    setInterval(updateClock, 1000);

    // Set last updated timestamp
    (function () {
      const el = document.getElementById("last-updated-time");
      if (!el) return;
      const now = new Date();
      const opts = {
        day: "2-digit",
        month: "short",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false,
      };
      el.textContent = now.toLocaleString("en-GB", opts);
    })();

    // Init orders table
    filterTable();
  </script>
</body>

</html>